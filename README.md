# Will It Rain On My Parade?

A complete weather probability analysis tool built for the NASA Space Apps 2025 Challenge. This project combines a data pipeline and an interactive dashboard to help users understand the likelihood of extreme weather events affecting outdoor plans in three Georgian cities: Tbilisi, Batumi, and Kutaisi.

## Project Overview

The project consists of two main components:

1. **Data Pipeline** (Python) - Downloads, preprocesses, and validates NASA POWER weather data
2. **Interactive Dashboard** (React + TypeScript) - Visualizes weather probabilities with real-time queries

### Key Features

- 🗺️ **Location-based Analysis**: Weather data for Tbilisi, Batumi, and Kutaisi
- 📊 **Probability Calculations**: Statistical analysis of extreme weather events (heavy rain, extreme heat, high winds)
- 📈 **ML Trend Detection**: Automated probability trend analysis showing climate change impacts
- 📅 **Historical Trends**: Data spanning 2005-2024 (daily) and 2020-2024 (hourly)
- 🎨 **Interactive Dashboard**: Modern React UI with maps, charts, and quick queries
- ⚡ **Offline-First**: Pre-processed JSON files for instant loading
- 📥 **Data Export**: CSV export with proper NASA attribution

## Quick Start

### Running the Dashboard

```bash
# Navigate to frontend directory
cd frontend

# Install dependencies
npm install

# Start development server
npm run dev
```

The dashboard will be available at `http://localhost:5173`

### Setting Up the Data Pipeline (Optional)

The repository includes pre-processed data files. To regenerate them:

```bash
# Install Python 3.9+ and dependencies
pip install -r requirements.txt

# Download raw NASA POWER data (2005-2024 daily, 2020-2024 hourly)
python nasa_power_download.py

# Preprocess into demo-ready JSON
python preprocess_probabilities.py

# Calculate ML-based probability trends
python calculate_probability_trends.py

# Validate data integrity
python validate_data.py
```

## Project Structure

```
random5/
├── frontend/              # React + TypeScript Dashboard
│   ├── src/
│   │   ├── components/   # UI components (Dashboard, Charts, Maps)
│   │   ├── services/     # Data loading services
│   │   ├── types/        # TypeScript definitions
│   │   └── utils/        # Helper functions
│   ├── public/
│   └── README.md         # Frontend documentation
├── data/                 # Weather data (generated by pipeline)
│   ├── raw/             # Raw CSV from NASA POWER API
│   ├── processed/       # Probability stats (JSON)
│   └── demo/            # Summary files for dashboard
├── nasa_power_download.py         # Data download script
├── preprocess_probabilities.py    # Statistical processing
├── calculate_probability_trends.py # ML trend detection
├── validate_data.py               # Data validation
└── requirements.txt               # Python dependencies
```

## Dashboard Features

### Interactive Components

- **Location Selector**: Choose from Tbilisi, Batumi, or Kutaisi
- **Date Range Picker**: Select dates to analyze weather probabilities
- **Weather Probabilities**: Color-coded risk levels for extreme events
- **Hourly Carousel**: Detailed hourly weather patterns
- **Climate Summary**: Long-term statistics and trends
- **Historical Trends with ML**: Visualize weather patterns with automated trend detection showing probability changes (e.g., "+16.9% per decade")
- **Quick Queries**: Pre-configured demo scenarios
- **Data Export**: Download weather data as CSV with NASA attribution

### Technologies

- **Frontend**: React 18, TypeScript, Vite, Tailwind CSS
- **Visualization**: Recharts (charts), React Leaflet (maps)
- **Backend**: Python 3.9+, pandas, numpy, scipy
- **Data Source**: NASA POWER API (CERES/MERRA2)

## Data Pipeline Details

### Extreme Event Thresholds

The pipeline calculates probabilities for these events:

- **Heavy Rain**: >10 mm/day (very heavy >25mm, extreme >50mm)
- **Extreme Heat**: >30°C (very hot >35°C, extreme >40°C)
- **Cold Events**: <0°C (very cold <-10°C)
- **High Winds**: >10 m/s (very windy >15m/s, extreme >20m/s)

Thresholds are configurable in `preprocess_probabilities.py`.

### Weather Variables

Temperature (T2M, T2M_MAX, T2M_MIN), Precipitation (PRECTOTCORR), Wind Speed (WS2M, WS10M, WS10M_MAX), Humidity (RH2M), Pressure (PS), and more. See code comments for units and definitions.

### Data Processing

1. **Download**: Fetches data from NASA POWER API with rate limiting and retry logic
2. **Preprocessing**: Calculates day-of-year probabilities using historical data
3. **Trend Analysis**: Calculates ML-based probability trends across all days using linear regression
4. **Validation**: Ensures data integrity and generates summary files
5. **Output**: JSON files optimized for instant dashboard loading

## Development

### Frontend Development

```bash
cd frontend
npm install
npm run dev     # Development server
npm run build   # Production build
npm run preview # Preview production build
```

See `frontend/README.md` for detailed frontend documentation.

### Data Pipeline Development

The data pipeline scripts are standalone Python files:
- `nasa_power_download.py` - Downloads raw data from NASA POWER API
- `preprocess_probabilities.py` - Processes data into probability statistics
- `calculate_probability_trends.py` - Calculates ML-based probability trends for extreme events
- `validate_data.py` - Validates data integrity

## NASA Data Attribution (Required)

All data in this project comes from:

- **Dataset**: NASA POWER
- **Source**: https://power.larc.nasa.gov/
- **Citation**: NASA/POWER CERES/MERRA2 Native Resolution Daily and Hourly Data; Derived from satellite and model reanalysis data
- **License**: Creative Commons Attribution 4.0 International

This attribution is automatically included in all data exports from the dashboard.

## Browser Support

The dashboard is optimized for Chrome (NASA Space Apps 2025 hackathon requirement). Desktop only, recommended resolution: 1920x1080.

## License

Created for NASA Space Apps 2025 Challenge.
